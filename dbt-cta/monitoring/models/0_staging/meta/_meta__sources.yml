version: 2

sources: 
  - name: meta
    database: "{{ env_var('CTA_PROJECT_ID') }}"
    schema: monitoring
    tables:
      - name: dag_mapping
        description: >-
          This table is an external table backed by a Google Sheet, that maps dag IDs
          from some of our non-Daggy McDagface DAGs to their corresponding syncs and
          partners. We created this external table using the
          dbt-labs/dbt_external_tables package. If we need to update the structure of
          the data (not the data itself), it can be updated by running the following
          cmd:
            dbt run-operation stage_external_sources -t cta   
        external:
          location: https://docs.google.com/spreadsheets/d/13xNwLfmT8frlqnPrqKVM1-YH00yRakoK1wRcXDOMjuc/edit
          options:
            format: GOOGLE_SHEETS
            skip_leading_rows: 1
        columns:
          - name: dag_id
            data_type: STRING
          - name: sync
            data_type: STRING
          - name: partner_name
            data_type: STRING
          - name: data_type
            data_type: STRING