version: 2

models:
  - name: stg_meta__dag_mapping
    columns:
      - name: dag_id
        tests:
          - not_null
          - unique
      - name: sync
        tests:
          - not_null
      - name: partner_name
        tests:
          - not_null
      - name: data_type
  - name: stg_meta__excluded_dags
    columns:
      - name: dag_id
        tests:
          - not_null
          - unique
  - name: stg_meta__configured_syncs
    description: >
      This is a stg table built off of an external table that is built off some json
      living in Composer's dags/ folder in each environment, specifically:
        dags/cta-dags/airbyte_syncs/configs/configured_syncs.json

      The data is a mapping from dag_id to partner_name, and is used to join into our
      data monitoring tables to get the partner_name for each dag_id.
    columns:
      - name: dag_id
        tests:
          - not_null
      - name: partner_name
        tests:
          - not_null
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns: [dag_id, partner_name]